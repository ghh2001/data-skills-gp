---
title: "OES Data Scraping"
author: "simplymathematics"
date: "October 18, 2018"
output: html_document
---
# Dependencies
```{r}
require(curl)
require(stringr)
require(XML)
```
# Downloading Data

This section downloads a single page. However, it can be modified to work across similar pages. 
```{r}
raw.data <- curl_download("https://www.bls.gov/oes/current/oes151111.htm", "OES_dollars.txt")
raw.data <- readLines("https://www.bls.gov/oes/current/oes151111.htm")
```

Since we're only interested in the first table, we'll cut everything else out.
```{r}
# Regex for all text between two table
first <- which(grepl("<table border=\"1\"", raw.data))[1]
last <- which(grepl("</table>", raw.data))[1]
truncated.data <- raw.data[first:last]
```

```{r}
html.data <- readHTMLTable(truncated.data)
html.data
```